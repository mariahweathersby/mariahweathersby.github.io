!function(e){function t(t){for(var o,a,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)a=c[l],r[a]&&p.push(r[a][0]),r[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(f&&f(t);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={0:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var f=s;i.push([78,1]),n()}({38:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);n(38),n(13),n(52),n(60),n(36),n(44);var o=n(0);n(11),n(12);o.DeviceOrientationControls=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0,this.betaOffsetAngle=0,this.gammaOffsetAngle=0;var n=function(e){t.deviceOrientation=e},r=function(){t.screenOrientation=window.orientation||0},i=function(){var e=new o.q(0,0,1),t=new o.c,n=new o.l,r=new o.l(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,i,a,c,s){t.set(a,i,-c,"YXZ"),o.setFromEuler(t),o.multiply(r),o.multiply(n.setFromAxisAngle(e,-s))}}();this.connect=function(){r(),window.addEventListener("orientationchange",r,!1),window.addEventListener("deviceorientation",n,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",r,!1),window.removeEventListener("deviceorientation",n,!1),t.enabled=!1},this.update=function(){if(!1!==t.enabled){var e=t.deviceOrientation.alpha?o.e.degToRad(t.deviceOrientation.alpha)+this.alphaOffsetAngle:0,n=t.deviceOrientation.beta?o.e.degToRad(t.deviceOrientation.beta)+this.betaOffsetAngle:0,r=t.deviceOrientation.gamma?o.e.degToRad(t.deviceOrientation.gamma)+this.gammaOffsetAngle:0,a=t.screenOrientation?o.e.degToRad(t.screenOrientation):0;i(t.object.quaternion,e,n,r,a),this.alpha=e}},this.updateAlphaOffsetAngle=function(e){this.alphaOffsetAngle=e,this.update()},this.updateBetaOffsetAngle=function(e){this.betaOffsetAngle=e,this.update()},this.updateGammaOffsetAngle=function(e){this.gammaOffsetAngle=e,this.update()},this.dispose=function(){this.disconnect()},this.connect()};n(19),n(20);var r={FOV:45,WINDOW_WIDTH:window.innerWidth,WINDOW_HEIGHT:window.innerHeight,ASPECT_RATIO:window.innerWidth/window.innerHeight,NEAR:.01,FAR:1e3};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(s(s(e=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}(this,a(t).call(this)))),"onMouseMove",function(t,n){e.userData.target.x=.002*(1-n.x),e.userData.target.y=.002*(1-n.y),e.rotation.x+=.05*(e.userData.target.y-e.rotation.x),e.rotation.y+=.05*(e.userData.target.x-e.rotation.y)}),u(s(s(e)),"onDeviceOrientationChange",function(t,n,o){e.userData.target.x=.002*(1-o.x),e.userData.target.y=.002*(1-o.y),e.rotation.x+=.05*(e.userData.target.y-e.rotation.x),e.rotation.y+=.05*(e.userData.target.x-e.rotation.y)}),e.aspect=n.ASPECT_RATIO,e.fov=n.FOV,e.near=n.NEAR,e.far=n.FAR,e.userData=[],e.userData.target=new o.p,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o["h"]),t}(),l={GAME_FLOOR:"GAME_FLOOR",TOWER_ALPHA:"TOWER_ALPHA",SHIP:"SHIP",METEOR:"METEOR"},p={WIDTH:20,HEIGHT:50,WIDTH_SEGMENTS:50},h={WIDTH:1,HEIGHT:10,DEPTH:1},y={WIDTH:1,HEIGHT:1,SPEED:2e-4},d={RADIUS:.75,WIDTH_SEGMENTS:5,HEIGHT_SEGMENTS:5,VALUE:3};function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,w(t).call(this))).config=n,e.gameObjectType=l.GAME_FLOOR,e.geometry=new o.i(50,100,30,30),e.material=new o.k({color:16777215,size:.15});var r=!0,i=!1,a=void 0;try{for(var c,s=function(){var e=c.value,t=function e(){var t=2*Math.random()-1;return 0==t?e():t};e.z=t(),e.x-=t()},u=e.geometry.vertices[Symbol.iterator]();!(r=(c=u.next()).done);r=!0)s()}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o["j"]),t}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=E(this,S(t).call(this))).config=n,e.gameObjectType=l.SHIP,e.geometry=new o.o(n.RADIUS,n.WIDTH_SEGMENTS,n.HEIGHT_SEGMENTS),e.material=new o.g({color:15597568,wireframe:!0}),e.position.y=7*Math.random(),e.destroyVal=Math.floor(5*Math.random()),e.mesh=new o.f(e.geometry,e.material),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,o["f"]),t}();function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(P(P(e=function(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?P(e):t}(this,M(t).call(this)))),"move",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(e.position.z-=.05,t){case"ArrowUp":e.position.y<=2&&(e.position.y+=.25);break;case"ArrowDown":e.position.y>=-Math.abs(2)&&(e.position.y-=.25);break;case"ArrowRight":e.position.x<=3.5&&(e.position.x+=.25);break;case"ArrowLeft":e.position.x>=-Math.abs(3.5)&&(e.position.x-=.25)}}),D(P(P(e)),"shoot",function(e,t){}),e.config=n,e.gameObjectType=l.SHIP,e.geometry=new o.a(n.WIDTH,n.HEIGHT),e.material=new o.g({color:15597568,wireframe:!0}),e.mesh=new o.f(e.geometry,e.material),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,o["f"]),t}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=x(this,I(t).call(this))).config=n,e.gameObjectType=l.TOWER_ALPHA,e.geometry=new o.a(n.WIDTH,n.HEIGHT,n.DEPTH),e.material=new o.g({color:16711680,wireframe:!0}),e.mesh=new o.f(e.geometry,e.material),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,o["f"]),t}(),C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t||"",a=function(e,t,n){for(var r=new o.d,i=0;i<t;i++){var a=new e;a.position.x=i*n,r.add(a)}return r};switch(e){case l.GAME_FLOOR:return new O(i);case l.METEOR:return 1==n?new T(i):a(T,n,r);case l.SHIP:return new H(i);case l.TOWER_ALPHA:return 1==n?new W(i):a(W,n,r);default:new Error("Invalid gameObjectType")}},G="SCENE_MANAGER";function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),z(this,"isCollider",function(e){var n=e.children;n.length>1?n.forEach(function(e){this.sceneObjects.canCollide.push(e)},t):t.sceneObjects.canCollide.push(e)}),z(this,"preload",function(){t.scene.userData.state="PRELOAD",t.playerShip=new C(l.SHIP),t.playerShip.position.z=10,t.sceneObjects.push(t.playerShip);var e=new C(l.GAME_FLOOR);e.position.y=-5,e.position.z=-70,e.rotateX(1.6),t.sceneObjects.push(e);var n=new C(l.TOWER_ALPHA,null,2,6);n.position.x=-3,n.position.z=-5,t.sceneObjects.push(n);var o=new C(l.TOWER_ALPHA,null,3,10);o.position.x=-10,o.position.z=-20,t.sceneObjects.push(o);var r=new C(l.TOWER_ALPHA,null,3,8);r.position.x=-8,r.position.z=-35,t.sceneObjects.push(r);var i=new C(l.TOWER_ALPHA,null,2,20);i.position.x=-10,i.position.z=-120,t.sceneObjects.push(i);var a=new C(l.METEOR,null,3,2);a.position.z=-50,t.sceneObjects.push(a),t.isCollider(a)}),z(this,"sceneStart",function(){t.playerShip.add(t.camera);var e=!0,n=!1,o=void 0;try{for(var r,i=t.sceneObjects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;t.scene.add(a)}}catch(e){n=!0,o=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw o}}t.scene.userData.state="ACTIVE"}),z(this,"sceneEnd",function(){}),z(this,"onResize",function(){var e=window.innerWidth,n=window.innerHeight;t.renderer.setSize(e,n),t.camera.updateProjectionMatrix()}),z(this,"onMouseMove",function(e){var n=new o.p(window.innerWidth/2,window.innerHeight/2);t.userData.mouse.x=e.clientX-n.x,t.userData.mouse.y=e.clientY-n.x,t.camera.onMouseMove(e,t.userData.mouse)}),z(this,"onKeyDown",function(e){if("click"==e.type||"mousedown"==e.type||"touchstart"==e.type){var n=e.target.getAttribute("data-buttoncode");t.playerShip.move(n)}else t.playerShip.move(e.code)}),z(this,"updateRaycaster",function(){t.raycaster.set(t.camera.getWorldPosition(),t.camera.getWorldDirection()),t.intersects=t.raycaster.intersectObjects(t.sceneObjects.canCollide),console.log("this.sceneObjects.canCollide: ",t.camera,t.playerShip);for(var e=0;e<t.intersects.length;e++)t.intersects[e].object.material.color.set(65280)}),z(this,"update",function(){"ACTIVE"==t.scene.userData.state&&(t.playerShip.move(),t.renderer.render(t.scene,t.camera),t.userData.isMobile&&t.controls.update()),t.playerShip.position.z<=-120&&(alert("end"),t.scene.userData.state="END")}),this.configObjectType=G,this.isMobile=n,this.userData={},this.sceneObjects=[],this.sceneObjects.canCollide=[],this.userData.mouse=new o.p,this.userData.isMobile=n,this.userData.currentVal=null,this.camera=new f,this.camera.position.set(0,0,-.5),this.renderer=new o.r({alpha:!0,canvas:document.getElementById("game-stage"),antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.scene=new o.n,this.raycaster=new o.m,this.intersects=[],this.userData.isMobile&&(this.controls=new o.DeviceOrientationControls(this.camera,!0),this.controls.connect())};function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F(this,"fetchProblem",function(e){var n=t.mathDictionary[e];return Math.floor(Math.random()*n.length)}),F(this,"updateProblem",function(e){t.currentProblem=e}),this.mathDictionary={1:["1 X 1","5 - 4","9 % 9"],2:["6 / 3","18 / 9","2 X 1"],3:["6 / 2"," 3 X 1","33 / 11"],4:["2 X 2","16 / 8","32 / 7"],5:["5 X 1","15 - 10","7 - 2"]},this.isMobile=n,this.currentProblem=""};function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,"bindEventListeners",function(){var e=null,n=document.getElementById("game-stage-wrapper"),o=document.getElementsByClassName("control-button");Array.from(o).forEach(function(t){t.addEventListener("click",this.onKeyDown,!1),t.addEventListener("touchstart",function(t){var n=this;e=setInterval(function(){return n.onKeyDown(t)},300)}),t.addEventListener("mouseup",function(t){clearTimeout(e)}),t.addEventListener("touchcancel",function(t){clearTimeout(e)}),t.addEventListener("touchend",function(t){clearTimeout(e)})},t),t.isMobile||(document.addEventListener("mousemove",t.onMouseMove,!1),document.addEventListener("keydown",t.onKeyDown,!1)),document.addEventListener("resize",t.onResize,!1),n.addEventListener("click",t.sceneManager.updateRaycaster,!1)}),X(this,"isMobileDevice",function(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}),X(this,"init",function(){var e=document.documentElement;t.isMobile&&e.classList.add("isMobile"),t.bindEventListeners(),t.sceneManager.preload(),t.sceneManager.sceneStart(),t.renderScene()}),X(this,"onKeyDown",function(e){e.preventDefault(),t.sceneManager.onKeyDown(e)}),X(this,"onMouseMove",function(e){e.preventDefault(),t.sceneManager.onMouseMove(e)}),X(this,"onResize",function(e){e.preventDefault(),t.sceneManager.onResize(e)}),X(this,"renderScene",function(){"ACTIVE"==t.sceneManager.scene.userData.state?(requestAnimationFrame(t.renderScene),t.sceneManager.update()):alert("fin")}),this.isMobile=this.isMobileDevice(),console.log("ismobile: ",this.isMobile),this.sceneManager=new N(this.isMobile),this.clientManager=new k(this.isMobile)}).init()}});
//# sourceMappingURL=app.3d22fb8b.js.map